import React, { useState, useEffect, useRef } from 'react';
import { Star, Shield, Gavel, Users, Eye, Zap, Globe, Satellite, Settings, Volume2, VolumeX } from 'lucide-react';

const GalacticCouncilPanel = () => {
  const [activeTab, setActiveTab] = useState('council');
  const [selectedJudge, setSelectedJudge] = useState(null);
  const [votingSession, setVotingSession] = useState(null);
  const [soundEnabled, setSoundEnabled] = useState(true);
  const [scannerActive, setScannerActive] = useState(true);
  const audioRef = useRef(null);

  // Council members data
  const councilMembers = [
    {
      id: 1,
      name: "Commander Zara Vex",
      species: "Centaurian",
      sector: "Alpha Quadrant",
      status: "Active",
      votes: 847,
      specialization: "Military Strategy",
      avatar: "ðŸ›¡ï¸",
      threat: "Low"
    },
    {
      id: 2,
      name: "Ambassador Keth'los",
      species: "Voidborn",
      sector: "Nebula Territories",
      status: "Active",
      votes: 923,
      specialization: "Diplomatic Relations",
      avatar: "ðŸŒŒ",
      threat: "Medium"
    },
    {
      id: 3,
      name: "Dr. Nova Chen",
      species: "Human Enhanced",
      sector: "Sol System",
      status: "Active",
      votes: 756,
      specialization: "Xenobiology",
      avatar: "ðŸ§¬",
      threat: "Low"
    },
    {
      id: 4,
      name: "High Arbiter Yx'thul",
      species: "Crystalline",
      sector: "Outer Rim",
      status: "Deliberating",
      votes: 1024,
      specialization: "Quantum Law",
      avatar: "ðŸ’Ž",
      threat: "High"
    }
  ];

  // Judges data
  const judges = [
    {
      id: 1,
      name: "Justice Theron Starweaver",
      court: "Supreme Galactic Court",
      cases: 2847,
      rulings: "Constitutional Law",
      status: "Presiding",
      avatar: "âš–ï¸",
      experience: "847 cycles"
    },
    {
      id: 2,
      name: "Arbiter Vex Nightfall",
      court: "Intergalactic Tribunal",
      cases: 1923,
      rulings: "War Crimes",
      status: "Available",
      avatar: "ðŸŒ‘",
      experience: "623 cycles"
    },
    {
      id: 3,
      name: "Magistrate Luna Quantum",
      court: "Temporal Court",
      cases: 3156,
      rulings: "Time Violations",
      status: "In Session",
      avatar: "â°",
      experience: "1247 cycles"
    }
  ];

  // Current cases
  const activeCases = [
    {
      id: 1,
      title: "The Andromeda Mining Dispute",
      priority: "Critical",
      sector: "Andromeda Galaxy",
      timeRemaining: "14:23:45",
      status: "Under Review"
    },
    {
      id: 2,
      title: "Temporal Interference Allegations",
      priority: "High",
      sector: "Time Nexus",
      timeRemaining: "06:15:30",
      status: "Evidence Phase"
    },
    {
      id: 3,
      title: "Resource Allocation Protocol",
      priority: "Medium",
      sector: "Outer Colonies",
      timeRemaining: "48:12:18",
      status: "Voting"
    }
  ];

  // Holographic scanner effect
  useEffect(() => {
    const interval = setInterval(() => {
      setScannerActive(prev => !prev);
    }, 3000);
    return () => clearInterval(interval);
  }, []);

  // Background ambient sound effect
  useEffect(() => {
    if (soundEnabled && audioRef.current) {
      audioRef.current.play();
    }
  }, [soundEnabled]);

  const startVotingSession = (caseId) => {
    setVotingSession(caseId);
    setTimeout(() => {
      setVotingSession(null);
    }, 10000);
  };

  const getThreatColor = (threat) => {
    switch(threat) {
      case 'Low': return 'text-green-400';
      case 'Medium': return 'text-yellow-400';
      case 'High': return 'text-red-400';
      default: return 'text-blue-400';
    }
  };

  const getPriorityColor = (priority) => {
    switch(priority) {
      case 'Critical': return 'text-red-500 animate-pulse';
      case 'High': return 'text-orange-400';
      case 'Medium': return 'text-yellow-400';
      default: return 'text-blue-400';
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-black text-white overflow-hidden relative">
      {/* Animated background stars */}
      <div className="absolute inset-0 overflow-hidden pointer-events-none">
        {[...Array(100)].map((_, i) => (
          <div
            key={i}
            className="absolute w-1 h-1 bg-white rounded-full animate-pulse"
            style={{
              left: `${Math.random() * 100}%`,
              top: `${Math.random() * 100}%`,
              animationDelay: `${Math.random() * 3}s`,
              animationDuration: `${2 + Math.random() * 3}s`
            }}
          />
        ))}
      </div>

      {/* Holographic scanner lines */}
      {scannerActive && (
        <div className="absolute inset-0 pointer-events-none">
          <div className="absolute inset-x-0 h-1 bg-gradient-to-r from-transparent via-cyan-500 to-transparent opacity-60 animate-pulse" 
               style={{ top: '20%', animationDuration: '2s' }} />
          <div className="absolute inset-x-0 h-1 bg-gradient-to-r from-transparent via-purple-500 to-transparent opacity-60 animate-pulse" 
               style={{ top: '60%', animationDelay: '1s', animationDuration: '2s' }} />
        </div>
      )}

      {/* Audio for ambient effect */}
      <audio ref={audioRef} loop className="hidden">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmQcBz6X2+/AdiMFl2+z9N2QQAoUXrTp66hVFApGn+DyvmQcBz6X2+/AdiMFl2+z9N2QQAoUXrTp66hVFApGn+DyvmQcBz6X2+/AdiMFl2+z9N2QQAoUXrTp66hVFApGn+DyvmQcBz6X2+/AdiMFl2+z9N2QQAoUXrTp66hVFApGn+DyvmQcBz6X2+/AdiMFl2+z9N2QQAoUXrTp66hVFApGn+DyvmQcBz6X2+/AdiMFl2+z9N2QQAoUXrTp66hVFApGn+DyvmQcBz6X2+/AdiMF" />
      </audio>

      <div className="relative z-10 p-6">
        {/* Header */}
        <div className="flex justify-between items-center mb-8">
          <div className="flex items-center space-x-4">
            <div className="relative">
              <Star className="w-12 h-12 text-yellow-400 animate-spin" style={{animationDuration: '8s'}} />
              <div className="absolute inset-0 w-12 h-12 bg-yellow-400 rounded-full opacity-20 animate-pulse" />
            </div>
            <div>
              <h1 className="text-4xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent">
                GALACTIC COUNCIL
              </h1>
              <p className="text-cyan-300">Stardate: 2387.156.4 | Sector Command Alpha</p>
            </div>
          </div>
          
          <div className="flex items-center space-x-4">
            <button
              onClick={() => setSoundEnabled(!soundEnabled)}
              className="p-3 bg-gray-800 bg-opacity-50 backdrop-blur-sm rounded-lg border border-cyan-500 hover:bg-opacity-70 transition-all"
            >
              {soundEnabled ? <Volume2 className="w-5 h-5 text-cyan-400" /> : <VolumeX className="w-5 h-5 text-gray-400" />}
            </button>
            <div className="flex items-center space-x-2 bg-gray-800 bg-opacity-50 backdrop-blur-sm rounded-lg border border-cyan-500 px-4 py-2">
              <div className="w-2 h-2 bg-green-400 rounded-full animate-pulse" />
              <span className="text-green-400 text-sm font-mono">SYSTEMS ONLINE</span>
            </div>
          </div>
        </div>

        {/* Navigation Tabs */}
        <div className="flex space-x-1 mb-8 bg-gray-900 bg-opacity-50 backdrop-blur-sm rounded-xl p-2 border border-cyan-500">
          {[
            { id: 'council', label: 'Council Members', icon: Users },
            { id: 'judges', label: 'Judicial Panel', icon: Gavel },
            { id: 'cases', label: 'Active Cases', icon: Eye },
            { id: 'monitoring', label: 'Galactic Monitor', icon: Satellite }
          ].map(tab => (
            <button
              key={tab.id}
              onClick={() => setActiveTab(tab.id)}
              className={`flex items-center space-x-2 px-6 py-3 rounded-lg transition-all duration-300 ${
                activeTab === tab.id
                  ? 'bg-gradient-to-r from-cyan-600 to-purple-600 text-white shadow-lg shadow-cyan-500/25'
                  : 'text-gray-400 hover:text-white hover:bg-gray-800'
              }`}
            >
              <tab.icon className="w-5 h-5" />
              <span className="font-semibold">{tab.label}</span>
            </button>
          ))}
        </div>

        {/* Council Members Tab */}
        {activeTab === 'council' && (
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
            {councilMembers.map(member => (
              <div key={member.id} 
                   className="bg-gradient-to-br from-gray-900 to-gray-800 bg-opacity-80 backdrop-blur-sm rounded-xl border border-cyan-500 p-6 hover:shadow-xl hover:shadow-cyan-500/25 transition-all duration-300 hover:scale-105">
                <div className="flex items-start justify-between mb-4">
                  <div className="flex items-center space-x-4">
                    <div className="text-4xl relative">
                      {member.avatar}
                      <div className="absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-gray-900" />
                    </div>
                    <div>
                      <h3 className="text-xl font-bold text-cyan-300">{member.name}</h3>
                      <p className="text-gray-400">{member.species}</p>
                      <p className="text-sm text-purple-300">{member.sector}</p>
                    </div>
                  </div>
                  <div className={`text-right ${getThreatColor(member.threat)}`}>
                    <Shield className="w-6 h-6 mb-1" />
                    <p className="text-xs font-bold">{member.threat} RISK</p>
                  </div>
                </div>
                
                <div className="grid grid-cols-3 gap-4 text-center">
                  <div className="bg-gray-800 rounded-lg p-3">
                    <p className="text-2xl font-bold text-green-400">{member.votes}</p>
                    <p className="text-xs text-gray-400">VOTES CAST</p>
                  </div>
                  <div className="bg-gray-800 rounded-lg p-3">
                    <p className="text-sm font-semibold text-yellow-400">{member.specialization}</p>
                    <p className="text-xs text-gray-400">SPECIALTY</p>
                  </div>
                  <div className="bg-gray-800 rounded-lg p-3">
                    <div className={`w-3 h-3 rounded-full mx-auto mb-1 ${
                      member.status === 'Active' ? 'bg-green-400 animate-pulse' : 
                      member.status === 'Deliberating' ? 'bg-yellow-400 animate-pulse' : 'bg-gray-400'
                    }`} />
                    <p className="text-xs text-gray-400">{member.status.toUpperCase()}</p>
                  </div>
                </div>
              </div>
            ))}
          </div>
        )}

        {/* Judges Panel Tab */}
        {activeTab === 'judges' && (
          <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
            {judges.map(judge => (
              <div key={judge.id}
                   onClick={() => setSelectedJudge(selectedJudge === judge.id ? null : judge.id)}
                   className={`bg-gradient-to-br from-purple-900 to-gray-900 bg-opacity-80 backdrop-blur-sm rounded-xl border-2 p-6 cursor-pointer transition-all duration-300 hover:scale-105 ${
                     selectedJudge === judge.id 
                       ? 'border-purple-400 shadow-xl shadow-purple-500/25' 
                       : 'border-purple-600 hover:border-purple-400'
                   }`}>
                <div className="text-center mb-4">
                  <div className="text-5xl mb-2">{judge.avatar}</div>
                  <h3 className="text-xl font-bold text-purple-300">{judge.name}</h3>
                  <p className="text-gray-400">{judge.court}</p>
                </div>
                
                <div className="space-y-3">
                  <div className="flex justify-between items-center">
                    <span className="text-gray-400">Cases:</span>
                    <span className="text-cyan-400 font-bold">{judge.cases.toLocaleString()}</span>
                  </div>
                  <div className="flex justify-between items-center">
                    <span className="text-gray-400">Specialty:</span>
                    <span className="text-yellow-400">{judge.rulings}</span>
                  </div>
                  <div className="flex justify-between items-center">
                    <span className="text-gray-400">Experience:</span>
                    <span className="text-green-400">{judge.experience}</span>
                  </div>
                  <div className="flex justify-between items-center">
                    <span className="text-gray-400">Status:</span>
                    <span className={`font-semibold ${
                      judge.status === 'Presiding' ? 'text-red-400' :
                      judge.status === 'In Session' ? 'text-yellow-400' : 'text-green-400'
                    }`}>
                      {judge.status}
                    </span>
                  </div>
                </div>

                {selectedJudge === judge.id && (
                  <div className="mt-4 pt-4 border-t border-purple-600 animate-fadeIn">
                    <button className="w-full bg-gradient-to-r from-purple-600 to-cyan-600 text-white py-2 px-4 rounded-lg hover:shadow-lg transition-all duration-300">
                      <Gavel className="w-4 h-4 inline mr-2" />
                      Assign to Case
                    </button>
                  </div>
                )}
              </div>
            ))}
          </div>
        )}

        {/* Active Cases Tab */}
        {activeTab === 'cases' && (
          <div className="space-y-6">
            {activeCases.map(caseItem => (
              <div key={caseItem.id} 
                   className="bg-gradient-to-r from-red-900 to-gray-900 bg-opacity-80 backdrop-blur-sm rounded-xl border border-red-500 p-6">
                <div className="flex justify-between items-start mb-4">
                  <div>
                    <h3 className="text-2xl font-bold text-red-300 mb-2">{caseItem.title}</h3>
                    <div className="flex items-center space-x-4 text-sm">
                      <span className="text-gray-400">Sector: {caseItem.sector}</span>
                      <span className={getPriorityColor(caseItem.priority)}>
                        Priority: {caseItem.priority}
                      </span>
                    </div>
                  </div>
                  <div className="text-right">
                    <div className="text-2xl font-mono text-cyan-400 mb-1">
                      {caseItem.timeRemaining}
                    </div>
                    <div className="text-sm text-gray-400">TIME REMAINING</div>
                  </div>
                </div>
                
                <div className="flex justify-between items-center">
                  <div className="flex items-center space-x-2">
                    <div className={`w-3 h-3 rounded-full ${
                      caseItem.status === 'Under Review' ? 'bg-yellow-400 animate-pulse' :
                      caseItem.status === 'Evidence Phase' ? 'bg-blue-400 animate-pulse' :
                      caseItem.status === 'Voting' ? 'bg-green-400 animate-pulse' : 'bg-gray-400'
                    }`} />
                    <span className="text-gray-300">Status: {caseItem.status}</span>
                  </div>
                  
                  <div className="space-x-3">
                    <button 
                      onClick={() => startVotingSession(caseItem.id)}
                      disabled={votingSession === caseItem.id}
                      className="bg-gradient-to-r from-cyan-600 to-blue-600 text-white px-4 py-2 rounded-lg hover:shadow-lg transition-all duration-300 disabled:opacity-50">
                      <Zap className="w-4 h-4 inline mr-2" />
                      {votingSession === caseItem.id ? 'Voting...' : 'Initiate Vote'}
                    </button>
                    <button className="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-2 rounded-lg hover:shadow-lg transition-all duration-300">
                      <Eye className="w-4 h-4 inline mr-2" />
                      Review
                    </button>
                  </div>
                </div>

                {votingSession === caseItem.id && (
                  <div className="mt-4 p-4 bg-gradient-to-r from-green-900 to-blue-900 rounded-lg border border-cyan-500 animate-pulse">
                    <div className="flex justify-center items-center space-x-4">
                      <Zap className="w-6 h-6 text-yellow-400 animate-bounce" />
                      <span className="text-xl font-bold text-cyan-300">COUNCIL VOTING IN PROGRESS</span>
                      <Zap className="w-6 h-6 text-yellow-400 animate-bounce" />
                    </div>
                  </div>
                )}
              </div>
            ))}
          </div>
        )}

        {/* Galactic Monitor Tab */}
        {activeTab === 'monitoring' && (
          <div className="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6">
            <div className="bg-gradient-to-br from-green-900 to-gray-900 bg-opacity-80 backdrop-blur-sm rounded-xl border border-green-500 p-6">
              <div className="flex items-center justify-between mb-4">
                <h3 className="text-xl font-bold text-green-300">System Status</h3>
                <Globe className="w-6 h-6 text-green-400 animate-spin" style={{animationDuration: '4s'}} />
              </div>
              <div className="space-y-3">
                <div className="flex justify-between">
                  <span className="text-gray-400">Power Grid:</span>
                  <span className="text-green-400">98.7% Online</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-gray-400">Defense Systems:</span>
                  <span className="text-green-400">Operational</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-gray-400">Communications:</span>
                  <span className="text-yellow-400">Partial</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-gray-400">Life Support:</span>
                  <span className="text-green-400">Optimal</span>
                </div>
              </div>
            </div>

            <div className="bg-gradient-to-br from-blue-900 to-gray-900 bg-opacity-80 backdrop-blur-sm rounded-xl border border-blue-500 p-6">
              <div className="flex items-center justify-between mb-4">
                <h3 className="text-xl font-bold text-blue-300">Fleet Status</h3>
                <Satellite className="w-6 h-6 text-blue-400" />
              </div>
              <div className="space-y-3">
                <div className="flex justify-between">
                  <span className="text-gray-400">Battle Cruisers:</span>
                  <span className="text-green-400">47 Active</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-gray-400">Reconnaissance:</span>
                  <span className="text-yellow-400">23 Deployed</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-gray-400">Support Vessels:</span>
                  <span className="text-green-400">156 Ready</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-gray-400">Emergency Status:</span>
                  <span className="text-green-400">All Clear</span>
                </div>
              </div>
            </div>

            <div className="bg-gradient-to-br from-purple-900 to-gray-900 bg-opacity-80 backdrop-blur-sm rounded-xl border border-purple-500 p-6">
              <div className="flex items-center justify-between mb-4">
                <h3 className="text-xl font-bold text-purple-300">Threat Assessment</h3>
                <Settings className="w-6 h-6 text-purple-400 animate-pulse" />
              </div>
              <div className="space-y-3">
                <div className="flex justify-between">
                  <span className="text-gray-400">Alpha Quadrant:</span>
                  <span className="text-green-400">Secure</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-gray-400">Beta Quadrant:</span>
                  <span className="text-yellow-400">Monitoring</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-gray-400">Gamma Quadrant:</span>
                  <span className="text-red-400">High Alert</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-gray-400">Delta Quadrant:</span>
                  <span className="text-green-400">Patrol Active</span>
                </div>
              </div>
            </div>
          </div>
        )}
      </div>
    </div>
  );
};

export default GalacticCouncilPanel;
